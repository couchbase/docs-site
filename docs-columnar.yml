# $(npm bin)/antora --clean --fetch antora-playbook.yml
# or
# $(npm bin)/antora --clean --generator=@antora/site-generator-ms --attribute=site-navigation-data-path=_/js/site-navigation-data.js --fetch antora-playbook.yml
site:
  title: Couchbase Docs
  url: https://docs.couchbase.com
# url: https://dgnicholson.github.io/AV-36621
  start_page: home::index.adoc
  keys:
    nav_groups: |
      [
        { "title": "Server", "startPage": "home::server.adoc", "components": ["server"] },
        { "title": "Mobile", "startPage": "home::mobile.adoc", "components": ["couchbase-lite", "sync-gateway"] },
        { "title": "Capella", "startPage": "cloud::index.adoc", "components": ["cloud"] },
        { "title": "Cloud-Native", "startPage": "cloud-native-database::index.adoc", "components": ["cloud-native-database"] },
        { "title": "Autonomous Operator", "components": ["operator"] },
        { "title": "Service Broker", "components": ["service-broker"] },
        { "title": "SDKs", "startPage": "home::sdk.adoc", "components": ["*-sdk", "cxx-txns", "elasticsearch-connector", "kafka-connector", "spark-connector"] },
        { "title": "Tutorials", "startPage": "tutorials::index.adoc", "components": ["tutorials"] }
      ]
git:
  ensure_git_suffix: false
urls:
  latest_version_segment_strategy: redirect:to
  latest_version_segment: current
content:
  branches: master
  # NOTE the git@ segment in the URL indicates which repositories are private
  sources:
  - url: .
    branches: HEAD
    start_path: home
#  - url: ../couchbase-cloud
#    branches: main
#    start_path: docs/public
  - url: ../docs-capella
    branches: [main]
  - url: https://github.com/couchbaselabs/docs-devex
    branches:  [release/7.6, release/7.2, capella, main]
  - url: ../docs-columnar
    branches: AV-78490-kafka-UI
    # AV-78395-UI-terms AV-78490-kafka-UI AV-78491-experiment AV-78395-UI-terms  
    # AV-78556-links-cost  AV-77748-describe-link AV-78619-run-analyze AV-78507-copy-to-rework
  # NOTE docs-server is currently after other server repos so nav key wins
  #- url: ~/repos/docs-server/
  #  branches: [release/7.1, release/7.2]
  #- url: ~/repos/docs-service-broker
  #  branches: [1.2.x, 1.1.x, 1.0.x]
  #- url: ~/repos/docs-sync-gateway/
  #  branches: [release/3.0, release/2.8, release/2.7, release/2.6, release/2.5, release/2.1, release/2.0, release/1.5]


asciidoc:
  attributes:
    azure-app-services: true
    embargo-xxx: false
    local-build: true
    max-include-depth: 10
    page-partial: false
    experimental: ''
    idprefix: '@'
    idseparator: '-@'
    tabs: tabs
    tabs-sync-option: ''
    toc: ~
    xrefstyle: short
    sqlpp: SQL++
    sqlppc: SQL++ for Capella columnar
    enterprise: https://www.couchbase.com/products/editions[ENTERPRISE EDITION]
    community: https://www.couchbase.com/products/editions[COMMUNITY EDITION]
  extensions:
 # - ./lib/asciidoctor-performance-patch.js
  - ./lib/source-url-include-processor.js
  - ./lib/json-config-ui-block-macro.js
  - ./lib/inline-man-macro.js
  - ./lib/multirow-table-head-tree-processor.js
  - ./lib/swagger-ui-block-macro.js
  - ./lib/tabs-block.js
  - '@asciidoctor/tabs'
ui:
  bundle:
#    url: /Users/danielnicholson/repos/docs-ui/build/ui-bundle.zip
    url: https://github.com/couchbase/docs-ui/releases/download/prod-189/ui-bundle.zip
output:
  dir: ./public